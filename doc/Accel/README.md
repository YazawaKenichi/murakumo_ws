# 加減速走行のやり方
## 概要
ロボトレース競技において、reRo - wiki に記述された方法を持ちいて、ラインに沿った加減速走行をする。

## 入力
- **速度**
  - エンコーダを用いて計測
  - **距離** も計測する
- **角速度**
  - IMU を用いて計測
    - エンコーダを用いて計測ができない
  - **角度** も計測する（いらないかも）

- **半径**
  - 速度 と 角速度 を用いて半径を求めることができる

## 前準備
### 半径に対応する速度のベタ打ち

半径に対して回れる速度を指定

例えばこんな感じ

``` C
if(radius < 100) speed = 1500;
else if(radius < 300)  speed = 1800;
else if(radius < 500)  speed = 2000;
else if(radius < 800)  speed = 2500;
else if(radius < 1000) speed = 3000;
else if(radius < 1500) speed = 4000;
else speed = MAX_SPEED;
```

これと計測した半径により、**どの区間をどの速度で走るか** が決まる。

これをここでは 「速度配列」 とでも呼ぶことにする（この記事だけの呼び名であり、一般的な呼び名ではない）。

## 加速度方向
前章で作成した「速度配列」に対して、**最大加速度を考慮した「加速度配列」** を計算する（これもここだけの呼び名）

現在の出力されている速度を $v_n$　、次に出してほしい速度を $v_{n+1}$ とする。

<!-- 問題は以下の、「距離ごとにサンプリングしているので」というところ -->
<!-- 角速度ではサンプリングしていないのでどうにかする必要がある -->

速度は距離ごとにサンプリングしているので、$v_n$ と $v_{n+1}$ 間の距離がわかっている。

これを $l$ とすると、$n, {n+1}$ 間の時間は、$t_n = frac{v_{n+1} - v_n}{l}$ となる。





